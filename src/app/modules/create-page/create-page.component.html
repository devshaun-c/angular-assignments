<app-header [title]="'Create Page'"></app-header>

<section class="wrapper">
	<app-stepper
		*ngIf="!isSuccess"
		[steps]="steps"
		[currentStep]="currentStep"
		[isLoading]="isLoading"
	>
		<div [ngSwitch]="currentStep">
			<app-step-1-form
				*ngSwitchCase="0"
				[formGroup]="firstFormGroup"
				[isLoading]="isLoading"
			></app-step-1-form>
			<app-step-2-form
				*ngSwitchCase="1"
				[formGroup]="secondFormGroup"
				[isLoading]="isLoading"
			></app-step-2-form>
			<app-step-3-form
				*ngSwitchCase="2"
				[data]="allData"
			></app-step-3-form>

			<div class="actions">
				<button
					mat-button
					type="button"
					(click)="prevStep()"
					[disabled]="currentStep === 0 || isLoading"
				>
					Back
				</button>
				<button
					mat-button
					class="action-button"
					type="button"
					(click)="nextStep()"
					[disabled]="!isCurrentFormValid || isLoading"
				>
					<div style="display: flex">
						<mat-progress-spinner
							*ngIf="isLoading"
							[diameter]="16"
							mode="indeterminate"
						></mat-progress-spinner>
						<span *ngIf="!isLoading">
							{{
								currentStep === steps.length - 1
									? "Submit"
									: "Next"
							}}</span
						>
					</div>
				</button>
			</div>
		</div>
	</app-stepper>

	<app-submit-success *ngIf="isSuccess"></app-submit-success>
</section>
